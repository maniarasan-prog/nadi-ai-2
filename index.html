<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>NADI-AI v3 Full тАФ The Healer Beyond Time (Simulation)</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;700&display=swap');
  :root{
    --gold:#d7b77a; --maroon:#643a19; --cyan:#00e5ff; --bg1:#7e5e35; --bg2:#003441; --glass: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box}
  body{ margin:0;padding:0; font-family:'Work Sans',sans-serif;
    background: linear-gradient(135deg,var(--bg1) 0%, #6a3e1b 50%, var(--bg2) 100%);
    color:#eef6f8; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; -webkit-touch-callout:none;}
  .wrap{max-width:1100px;margin:0 auto;padding:18px}
  header{text-align:center;margin-top:12px}
  h1{font-size:2.2rem;margin:0;color:var(--gold);text-shadow:0 0 12px var(--cyan)}
  .subtitle{color:var(--cyan); margin-top:6px; font-size:1rem}
  .created{margin-top:6px;color:#fff6e6;font-size:0.9rem}
  #intro{height:320px; display:flex; align-items:center; justify-content:center; flex-direction:column}
  #scanSection{display:none; margin-top:8px}
  .pulseArea{display:grid; grid-template-columns:1fr 380px; gap:18px; align-items:start}
  #pulseCanvas{width:100%; height:260px; background:var(--glass); border-radius:12px; border:2px solid rgba(0,229,255,0.10); overflow:hidden; position:relative}
  #holoWrap{display:flex; flex-direction:column; align-items:center; gap:12px}
  #hologram{width:170px; height:170px; border-radius:50%; background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.05), rgba(0,229,255,0.03)); box-shadow:0 0 30px rgba(0,229,255,0.12); position:relative; transform-style:preserve-3d; animation:spin 8s linear infinite}
  @keyframes spin{from{transform:rotateY(0) rotateX(0)} to{transform:rotateY(360deg) rotateX(360deg)}}
  .holoCore{width:92px;height:92px;border-radius:50%; background:linear-gradient(135deg,var(--cyan),#7d3cff); box-shadow:0 0 18px rgba(125,60,255,0.6),0 0 40px rgba(0,229,255,0.12)}
  .scanBtn{margin-top:14px;padding:14px 26px;border-radius:26px;background:linear-gradient(90deg,var(--gold),#f0c66a);color:#033237;border:none;font-weight:800;cursor:pointer;box-shadow:0 6px 26px rgba(0,0,0,0.45)}
  .scanBtn:hover{transform:scale(1.03);transition:transform 0.15s}
  .report{margin-top:22px;padding:18px;background:rgba(255,255,255,0.06);border-radius:14px;box-shadow:0 0 20px rgba(0,188,212,0.12);color:#eef6f8;text-align:left;max-width:100%}
  .report h2{margin:0 0 8px 0;color:var(--cyan)}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .card{background:rgba(0,0,0,0.12);padding:12px;border-radius:10px;min-width:140px}
  .highlight{color:var(--gold);font-weight:700}
  .disclaimer{margin-top:14px;padding:12px;border-radius:8px;background:rgba(255,80,80,0.08);color:#ffdede;font-weight:700}
  .conditions{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
  .condTag{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);font-weight:700;font-size:0.95rem}
  .primaryConditionBox{margin-top:14px;padding:14px;text-align:center;border-radius:12px;background: radial-gradient(circle, rgba(255,215,0,0.06), rgba(0,229,255,0.03));border: 2px solid rgba(0,229,255,0.20);box-shadow: 0 0 18px rgba(0,229,255,0.3);animation: glowPulse 3s ease-in-out infinite;font-weight:800;color:#fff6d8;font-size:1.1rem}
  @keyframes glowPulse{0%{box-shadow:0 0 10px rgba(0,229,255,0.2)}50%{box-shadow:0 0 28px rgba(255,215,0,0.9)}100%{box-shadow:0 0 10px rgba(0,229,255,0.2)}}
  footer{text-align:center;margin:18px 0 40px 0;color:rgba(255,255,255,0.7)}
  @media(max-width:900px){.pulseArea{grid-template-columns:1fr;}#hologram{margin:10px auto}}
</style>
</head>
<body>
  <div class="wrap">
    <header id="intro">
      <h1>NADI-AI v3 тАФ The Healer Beyond Time</h1>
      <div class="subtitle">роиро╛роЯро┐-роР ро╡ро┐3 тАФ рокрогрпНроЯрпИроп роЮро╛ройроорпН, роОродро┐ро░рпНроХро╛ро▓ роирпБрогрпНрогро▒ро┐ро╡рпБ</div>
      <div class="created">ЁЯФ╣ Created by MV тАФ Visionary Innovator ЁЯФ╣</div>
    </header>

    <main id="scanSection">
      <div class="pulseArea">
        <div id="pulseCanvas" aria-hidden="true"></div>

        <div id="holoWrap">
          <div id="hologram" aria-hidden="true">
            <div style="display:flex;align-items:center;justify-content:center;height:100%;"><div class="holoCore"></div></div>
          </div>

          <button class="scanBtn" id="scanBtn">Begin Pulse Analysis / родрпБроЯро┐рокрпНрокрпБ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ родрпКроЯроЩрпНроХрпБ</button>

          <div style="width:100%;max-width:360px" class="report" id="reportSmall">
            <h3 style="margin-top:0;color:var(--gold)">Quick View / ро╡ро┐ро░рпИро╡рпБ роХро╛роЯрпНроЪро┐</h3>
            <p style="margin:4px 0">Pulse: <span id="qPulse" class="highlight">--</span></p>
            <p style="margin:4px 0">Stress: <span id="qStress" class="highlight">--</span></p>
            <p style="margin:4px 0">Diabetes Risk: <span id="qDiab" class="highlight">--</span></p>
            <p style="margin:4px 0">Cardiac Risk: <span id="qCard" class="highlight">--</span></p>
          </div>
        </div>
      </div>

      <div class="report" id="reportFull" aria-live="polite" style="display:none">
        <div id="primaryConditionBox" class="primaryConditionBox" style="display:none">
          Primary Condition (Simulation): <span id="primaryCondText">--</span>
        </div>

        <h2>ЁЯза AI Health Report / роРроП роЪрпБроХро╛родро╛ро░ роЕро▒ро┐роХрпНроХрпИ</h2>

        <div class="row">
          <div class="card">Pulse Rate / роЗродропродрпН родрпБроЯро┐рокрпНрокрпБ: <span id="pulseVal" class="highlight">-- bpm</span></div>
          <div class="card">Rhythm / родро╛ро│роорпН: <span id="rhythmVal" class="highlight">--</span></div>
          <div class="card">Stress Level / роЕро┤рпБродрпНродроорпН: <span id="stressVal" class="highlight">--</span></div>
        </div>

        <div style="height:12px"></div>

        <div class="row">
          <div class="card">Diabetes Risk (simulated) / роирпАро░ро┐ро┤ро┐ро╡рпБ роЕрокро╛ропроорпН: <span id="diabVal" class="highlight">--%</span></div>
          <div class="card">Cardiac Risk (simulated) / роирпЖроЮрпНроЪрпБ роЕрокро╛ропроорпН: <span id="cardVal" class="highlight">--%</span></div>
        </div>

        <div style="height:12px"></div>

        <p id="aiObs">AI Observation / роРроП роХро╡ройроорпН: <span class="highlight">--</span></p>
        <p id="advice">Suggestion / рокро░ро┐роирпНродрпБро░рпИ: <span class="highlight">--</span></p>

        <div style="height:12px"></div>
        <h3 style="margin:6px 0 6px 0;color:var(--gold)">Possible Conditions / роЪро╛родрпНродро┐ропрооро╛рой роирпЛропрпНроХро│рпН (Simulation)</h3>
        <div class="conditions" id="conditionsList" aria-live="polite"></div>

        <div class="disclaimer">
          <div><strong>IMPORTANT / роорпБроХрпНроХро┐ропроорпН:</strong></div>
          <div>This interface shows a <strong>simulation</strong> of possible health indicators and conditions only. It is <u>not</u> a medical diagnosis. For confirmation, consult a healthcare professional and take laboratory tests (blood sugar test, ECG, troponin, etc.).</div>
          <div>роЗроирпНрод роЗроЯрпИроорпБроХроорпН роЪро╛родрпНродро┐ропрооро╛рой роЙроЯро▓рпНроиро▓ роХрпБро▒ро┐роХро│рпН рооро▒рпНро▒рпБроорпН роирпЛропрпНроХро│ро┐ройрпН <strong>рооро╛родро┐ро░ро┐</strong> роороЯрпНроЯрпБроорпН роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ. роЗродрпБ рооро░рпБродрпНродрпБро╡родрпН родрпАро░рпНрооро╛ройроорпН роЕро▓рпНро▓. роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод рооро░рпБродрпНродрпБро╡ роЪрпЗро╡рпИроХро│рпИ роЕрогрпБроХро┐ рокро░ро┐роЪрпЛродройрпИроХро│рпН роорпЗро▒рпНроХрпКро│рпНро│ро╡рпБроорпН.</div>
        </div>
      </div>
    </main>

    <footer>
      <small>Ancient wisdom + modern AI тАФ educational simulation only.</small>
    </footer>
  </div>

  <!-- Heartbeat (external free sample) -->
  <audio id="heartbeatSound" src="https://freesound.org/data/previews/499/499435_10278108-lq.mp3" crossorigin="anonymous"></audio>

<script>
/* ============================
   LARGE DEMO CONDITIONS POOL
   (40+ items mixing realistic + futuristic names)
   ============================ */
const demoConditions = [
  {en:"Type 2 Diabetes Risk (Simulation)", ta:"роЯрпИрокрпН 2 роирпАро░ро┐ро┤ро┐ро╡рпБ роЕрокро╛ропроорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Pre-diabetes / Insulin Resistance (Simulation)", ta:"роорпБройрпНроирпАро░ро┐ро┤ро┐ро╡рпБ / роЗройрпНроЪрпБро▓ро┐ройрпН роХрпБро▒рпИрокро╛роЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Hypertension Pattern (Simulation)", ta:"роЙропро░рпН роЗро░родрпНрод роЕро┤рпБродрпНродроорпН рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"},
  {en:"Cardiac Rhythm Instability (Simulation)", ta:"роЗродроп родро╛ро│ роЕроЪроороиро┐ро▓рпИ (рооро╛родро┐ро░ро┐)"},
  {en:"Arrhythmia (Simulation)", ta:"роЕроЪроороиро┐ро▓рпИроп роЗродропродрпН родрпБроЯро┐рокрпНрокрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Stress Response Overload (Simulation)", ta:"роЕро┤рпБродрпНрод роОродро┐ро░рпНро╡ро┐ройрпИ роЕродро┐роХрокро╛роЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Neural Fatigue Syndrome (Simulation)", ta:"роиро░роорпНрокрпБ роЪрпЛро░рпНро╡рпБ роиро┐ро▓рпИ (рооро╛родро┐ро░ро┐)"},
  {en:"Cognitive Load Syndrome (Simulation)", ta:"роЕро▒ро┐ро╡рпБ роЪрпБроорпИ роирпЛропрпН (рооро╛родро┐ро░ро┐ропро╛ройродрпБ)"},
  {en:"Energy Regulation Imbalance (Simulation)", ta:"роЖро▒рпНро▒ро▓рпН роТро┤рпБроЩрпНроХрпБроорпБро▒рпИ роЪроороиро┐ро▓рпИ роЗро┤рокрпНрокрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Bioelectric Rhythm Drift (Simulation)", ta:"роЙропро┐ро░рпН рооро┐ройрпН родро╛ро│ рооро╛ро▒рпНро▒роорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Dehydration & Electrolyte Deficit (Simulation)", ta:"роирпАро░рпНрооро┐ройрпНроорпИ рооро▒рпНро▒рпБроорпН роЙрокрпНрокрпБроЪрпН роЪродрпНродрпБ роХрпБро▒рпИро╡рпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Thermal Stress Instability (Simulation)", ta:"ро╡рпЖрокрпНрок роЕро┤рпБродрпНродроорпН роиро┐ро▓рпИроХрпБро▓рпИро╡рпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Venom Interaction Pattern (Simulation)", ta:"ро╡ро┐ро╖роорпН родрпКроЯро░рпНрокрпБ ро╡роЯро┐ро╡роорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Possible Envenomation Reaction (Simulation)", ta:"ро╡ро┐ро╖ родро╛роХрпНроХ роОродро┐ро░рпНро╡ро┐ройрпИ роЪро╛родрпНродро┐ропроорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Allergic Response Flag (Simulation)", ta:"роЕро▓рпЖро░рпНроЬро┐роХрпН роОродро┐ро░рпНро╡ро┐ройрпИ роХрпБро▒ро┐рокрпНрокрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Viral Fatigue Pattern (Simulation)", ta:"ро╡рпИро░ро╕рпН роЪро╛ро░рпНроирпНрод роЪрпЛро░рпНро╡рпБ рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"},
  {en:"Acute Inflammatory Pattern (Simulation)", ta:"ро╡рпЖроХрпБро╡ро╛рой роЕро┤ро▒рпНроЪро┐ рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"},
  {en:"Immune Fluctuation Index (Simulation)", ta:"роирпЛропрпН роОродро┐ро░рпНрокрпНрокрпБ рокро░ро┐рооро╛рог рооро╛ро▒рпНро▒роорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Hormonal Stress Disturbance (Simulation)", ta:"ро╣ро╛ро░рпНроорпЛройрпН роЕро┤рпБродрпНродроХрпН роХрпБро┤рокрпНрокроорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Metabolic Rhythm Shift (Simulation)", ta:"роорпЖроЯрпНроЯрокро╛ро▓ро┐роХрпН родро╛ро│ рооро╛ро▒рпНро▒роорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Micro-circulation Delay (Simulation)", ta:"роЪро┐ро▒рпБрои)returnation роЪрпАро░рпНроХрпЗроЯрпБ (рооро╛родро┐ро░ро┐)".replace('returnation','ро░родрпНрод роУроЯрпНроЯ'), ta:"роЪро┐ро▒рпБроирпАро░рпЗро╛роЯрпНроЯ роЪрпАро░рпНроХрпЗроЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Peripheral Signal Lag (Simulation)", ta:"роЪрпБро▒рпНро▒рпБ роЪро┐роХрпНройро▓рпН родро╛роородроорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Respiratory Sync Disturbance (Simulation)", ta:"роорпВроЪрпНроЪрпБродрпН родро╛ро│ роЪрпАро░рпНроХрпЗроЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Cellular Energy Drop (Simulation)", ta:"роЪрпЖро▓рпН роЖро▒рпНро▒ро▓рпН роХрпБро▒рпИро╡рпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Bio-signal Instability (Simulation)", ta:"роЙропро┐ро░рпНроЪро┐роХрпНройро▓рпН роиро┐ро▓рпИроХрпБро▓рпИро╡рпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Autonomic Drift Index (Simulation)", ta:"родро╛ройро┐ропроЩрпНроХро┐ рооро░рокрпБ роЪрпБро┤ро▒рпНроЪро┐ роХрпБро▒ро┐ропрпАроЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Neuro-Inflammation Trace (Simulation)", ta:"роиро░роорпНрокрпБ-роЕро┤ро▒рпНроЪро┐ родроЯроорпН (рооро╛родро┐ро░ро┐)"},
  {en:"Oxygenation Variation Pattern (Simulation)", ta:"роЖроХрпНроЪро┐роЬройрпЗро╖ройрпН рооро╛ро▒рпНро▒роорпН рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"},
  {en:"Metabolic Toxin Flag (Simulation)", ta:"роорпЖроЯрпНроЯрокро╛ро▓ро┐роХрпН ро╡ро┐ро╖ роХрпБро▒ро┐рокрпНрокрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Microbial Signal Variation (Simulation)", ta:"роорпИроХрпНро░рпЛрокро┐ропро▓рпН роЪро┐роХрпНройро▓рпН рооро╛ро▒рпБрокро╛роЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Cortisol Elevation Pattern (Simulation)", ta:"роХрпЛро░рпНроЯро┐роЪро╛ро▓рпН роЙропро░рпНро╡рпБ рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"},
  {en:"Neurochemical Drift (Simulation)", ta:"роиро░роорпНрокрпБ ро╡рпЗродро┐ропро┐ропро▓рпН роЯро┐ро░ро┐рокрпНроЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Quantum Stress Disorder (Simulation)", ta:"роХрпБро╡ро╛рогрпНроЯроорпН роЕро┤рпБродрпНрод роирпЛропрпН (рооро╛родро┐ро░ро┐)"},
  {en:"Synaptic Fatigue Marker (Simulation)", ta:"роЪро┐ройро╛рокрпНроЯро┐роХрпН роЪрпЛро░рпНро╡рпБ роХрпБро▒ро┐роХрпИ (рооро╛родро┐ро░ро┐)"},
  {en:"Autonomic Hyperactivity (Simulation)", ta:"родро╛ройро┐ропроЩрпНроХро┐ рооро┐роХрпНро░ро╛роЯрпН роЪрпЖропро▓рпНрокро╛роЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Peripheral Neuropathy Pattern (Simulation)", ta:"роЪрпБро▒рпНро▒рпБ роиро░роорпНрокрпБ роХрпЛро│ро╛ро▒рпБ рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"},
  {en:"Bio-energetic Imbalance (Simulation)", ta:"роЙропро┐ро░рпН-роЖро▒рпНро▒ро▓рпН роЪроороиро┐ро▓рпИ рокрпЗроЪрпНроЪрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Inflammation Residue Index (Simulation)", ta:"роЕро┤ро▒рпНроЪро┐ роЕро╡роЪро░ роХрпБро▒ро┐ропрпАроЯрпНроЯрпБ (рооро╛родро┐ро░ро┐)"},
  {en:"Adaptive Failure Pattern (Simulation)", ta:"роЕройрпБроХрпНроХрпВро▓ро┐ родрпЛро▓рпНро╡ро┐ рооро╛родро┐ро░ро┐ (рооро╛родро┐ро░ро┐)"}
];

/* Helper: pick random primary */
function pickPrimaryCondition(){
  return demoConditions[Math.floor(Math.random()*demoConditions.length)];
}

/* Speech: bilingual hybrid doctor + robotic */
function speakHybrid(enText, taText){
  const doc = new SpeechSynthesisUtterance(enText);
  doc.lang = 'en-US'; doc.rate = 0.95; doc.pitch = 1.05;
  const robo = new SpeechSynthesisUtterance(enText);
  robo.lang = 'en-US'; robo.rate = 1.05; robo.pitch = 0.9; robo.volume = 0.95;
  const docTa = new SpeechSynthesisUtterance(taText);
  docTa.lang = 'ta-IN'; docTa.rate = 0.95; docTa.pitch = 1.05;
  const roboTa = new SpeechSynthesisUtterance(taText);
  roboTa.lang = 'ta-IN'; roboTa.rate = 1.05; roboTa.pitch = 0.9;
  speechSynthesis.cancel();
  speechSynthesis.speak(doc);
  setTimeout(()=> speechSynthesis.speak(robo), 1700);
  setTimeout(()=> speechSynthesis.speak(docTa), 3400);
  setTimeout(()=> speechSynthesis.speak(roboTa), 5100);
}

/* Canvas pulse animation */
const holder = document.getElementById('pulseCanvas');
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
holder.appendChild(canvas);
function resize(){ canvas.width = holder.clientWidth; canvas.height = holder.clientHeight; }
window.addEventListener('resize', resize); resize();
let phase = 0, amplitude = 30, animActive = true;
function animateWave(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = 'rgba(0,0,0,0.02)'; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.beginPath();
  for(let x=0;x<canvas.width;x++){
    const y = canvas.height/2 + amplitude * Math.sin((phase + x)/72) + Math.sin((phase + x)/18)*6;
    if(x===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  }
  ctx.strokeStyle = '#00e5ff'; ctx.lineWidth = 2.2; ctx.shadowColor = '#00e5ff'; ctx.shadowBlur = 10; ctx.stroke();
  phase += 3;
  if(animActive) requestAnimationFrame(animateWave);
}
animateWave();

/* Simple simulated risk computation (educational only) */
function computeRisks(pulse){
  const rand = Math.random();
  let diab = Math.round(Math.min(90, Math.max(5, (100 - (pulse-50))*0.5 + rand*20 )));
  let card = Math.round(Math.min(95, Math.max(2, (pulse>95? (pulse-90)*2 + rand*15 : (90 - pulse)*0.2 + rand*8) )));
  diab = Math.max(3, Math.min(98, diab + Math.round((Math.random()-0.5)*10)));
  card = Math.max(2, Math.min(98, card + Math.round((Math.random()-0.5)*12)));
  return {diab, card};
}

/* Suggest possible conditions (mix deterministic + random extras) */
function suggestConditions(pulse, rhythm, risks){
  const conds = [];
  if(risks.card > 75 || pulse > 110) conds.push({en:'Acute Cardiac Disturbance (Simulation)', ta:'роЙроЯройроЯро┐ роЗродропроХрпН роХрпБро▒рпИро╡рпБ (рооро╛родро┐ро░ро┐)'});
  if(risks.card >= 50 && risks.card <= 75) conds.push({en:'Arrhythmia / Irregular Heartbeat (Simulation)', ta:'роЕроЪроороиро┐ро▓рпИроп роЗродропродрпН родрпБроЯро┐рокрпНрокрпБ (рооро╛родро┐ро░ро┐)'});
  if(risks.diab > 70) conds.push({en:'Type 2 Diabetes risk (Simulation)', ta:'роЯрпИрокрпН 2 роирпАро░ро┐ро┤ро┐ро╡рпБ роЕрокро╛ропроорпН (рооро╛родро┐ро░ро┐)'});
  if(risks.diab >=40 && risks.diab <=70) conds.push({en:'Pre-diabetes / Insulin resistance (Simulation)', ta:'роорпБройрпНроирпАро░ро┐ро┤ро┐ро╡рпБ / роЗройрпНроЪрпБро▓ро┐ройрпН роХрпБро▒рпИрокро╛роЯрпБ (рооро╛родро┐ро░ро┐)'});
  if(pulse < 60) conds.push({en:'Possible dehydration or low activity (Simulation)', ta:'роирпАро░рпНрооро┐ройрпНроорпИ роЕро▓рпНро▓родрпБ роХрпБро▒рпИроирпНрод роЪрпЖропро▒рпНрокро╛роЯрпБ роЪро╛родрпНродро┐ропроорпН (рооро╛родро┐ро░ро┐)'});
  if(pulse >= 80 && pulse <= 95) conds.push({en:'Stress-related tachycardia / fatigue (Simulation)', ta:'роЕро┤рпБродрпНрод роЗрогрпИроирпНрод роЪрпЛро░рпНро╡рпБ (рооро╛родро┐ро░ро┐)'});
  if(Math.random() < 0.08) conds.push({en:'Possible envenomation reaction (Simulation) тАФ rare flag', ta:'ро╡ро┐ро╖ родро╛роХрпНроХроорпН роЪро╛родрпНродро┐ропроорпН (рооро╛родро┐ро░ро┐) тАФ роЕро░ро┐родро╛рой роХрпБро▒ро┐роХрпНроХрпЛро│рпН'});
  // extras: pick 1..3 random distinct entries from demoConditions
  const extraCount = Math.floor(Math.random()*3) + 1;
  const pool = demoConditions.slice();
  for(let i=0;i<extraCount;i++){
    const idx = Math.floor(Math.random()*pool.length);
    conds.push(pool.splice(idx,1)[0]);
  }
  // unique & limit to 7
  const unique = [];
  for(const c of conds){
    if(!unique.find(u=>u.en===c.en)) unique.push(c);
    if(unique.length>=7) break;
  }
  if(unique.length===0) unique.push({en:'No specific condition indicated (Simulation)', ta:'роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роирпЛропрпН роЗро▓рпНро▓рпИ (рооро╛родро┐ро░ро┐)'});
  return unique;
}

/* Button & scan flow */
const scanBtn = document.getElementById('scanBtn');
const heartbeat = document.getElementById('heartbeatSound');
scanBtn.addEventListener('click', ()=> startScan());

function startScan(){
  const holo = document.querySelector('.holoCore');
  holo.style.transition='transform 0.25s ease-in-out';
  heartbeat.currentTime = 0; heartbeat.play();

  // holo pulse visual
  let pulseCount=0;
  const holoInt = setInterval(()=> { holo.style.transform = `scale(${1 + 0.06*Math.sin(pulseCount/2)})`; pulseCount++; if(pulseCount>34){ clearInterval(holoInt); holo.style.transform='scale(1)'; } },90);

  // reset
  document.getElementById('reportSmall').style.display='block';
  document.getElementById('reportFull').style.display='none';
  document.getElementById('qPulse').textContent='--';
  document.getElementById('qStress').textContent='--';
  document.getElementById('qDiab').textContent='--';
  document.getElementById('qCard').textContent='--';
  document.getElementById('primaryConditionBox').style.display='none';
  document.getElementById('conditionsList').innerHTML='';

  // simulate scan delay
  setTimeout(()=> {
    const pulse = Math.floor(Math.random()*60) + 50; // 50..109
    const rhythm = Math.random()<0.12 ? 'Irregular / роЕроЪроороиро┐ро▓рпИ' : 'Regular / роТро┤рпБроЩрпНроХро╛рой';
    const stress = pulse > 95 ? 'High Stress / роЕродро┐роХ роЕро┤рпБродрпНродроорпН' : (pulse > 80 ? 'Mild Stress / рооро┐родрооро╛рой роЕро┤рпБродрпНродроорпН' : 'Normal / роЪро╛родро╛ро░рогроорпН');
    const risks = computeRisks(pulse);

    let observation = 'No immediate critical markers detected / роЙроЯройроЯро┐ роХроЯрпБроорпИропро╛рой роХрпБро▒ро┐роХро╛роЯрпНроЯро┐роХро│рпН роЗро▓рпНро▓рпИ';
    let suggestion = 'Maintain hydration and rest; follow up with tests if symptoms persist / роирпАро░рпНроИро░роорпН родроХрпНроХро╡рпИродрпНродрпБроХрпН роХрпКро│рпНро│ро╡рпБроорпН; роЕро▒ро┐роХрпБро▒ро┐роХро│рпН роирпАроЯро┐родрпНродро╛ро▓рпН рокро░ро┐роЪрпЛродройрпИроХро│рпН роорпЗро▒рпНроХрпКро│рпНро│ро╡рпБроорпН';
    if(risks.card > 70){ observation='Elevated cardiac risk indicators detected (simulation) / роЗродроп роЕрокро╛ропроорпН роЕродро┐роХро░ро┐роХрпНроХро┐ро▒родрпБ (рооро╛родро┐ро░ро┐)'; suggestion='Seek immediate medical attention; recommended tests: ECG, Troponin; do not delay / роЙроЯройроЯро┐ рооро░рпБродрпНродрпБро╡ роЙродро╡ро┐ рокрпЖро▒ро╡рпБроорпН; ECG, Troponin рокро░ро┐роЪрпЛродройрпИроХро│рпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой'; }
    else if(risks.diab > 70){ observation='Elevated diabetes risk indicators detected (simulation) / роирпАро░ро┐ро┤ро┐ро╡рпБ роЕрокро╛ропроорпН роЕродро┐роХро░ро┐роХрпНроХро┐ро▒родрпБ (рооро╛родро┐ро░ро┐)'; suggestion='Recommend blood glucose test (Fasting & HbA1c) and doctor consultation / роЗро░родрпНрод роЪро░рпНроХрпНроХро░рпИ рокро░ро┐роЪрпЛродройрпИ рооро▒рпНро▒рпБроорпН рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН'; }
    else if(risks.card > 50 || risks.diab > 50){ observation='Moderate risk indicators observed (simulation) тАФ suggest timely medical tests / рооро┐родрооро╛рой роЕрокро╛ропроХрпН роХрпБро▒ро┐роХро╛роЯрпНроЯро┐роХро│рпН роХро╛рогрокрпНрокроЯрпБроХро┐ро▒родрпБ (рооро╛родро┐ро░ро┐)'; suggestion='Visit clinic for blood tests and ECG as required / роЗро░родрпНрод рокро░ро┐роЪрпЛродройрпИ рооро▒рпНро▒рпБроорпН ECG роЪрпЖропрпНропро╡рпБроорпН'; }

    // primary + conditions
    const primaryCond = pickPrimaryCondition();
    const possible = suggestConditions(pulse, rhythm, risks);

    // update quick view
    document.getElementById('qPulse').textContent = pulse + ' bpm';
    document.getElementById('qStress').textContent = stress;
    document.getElementById('qDiab').textContent = risks.diab + '%';
    document.getElementById('qCard').textContent = risks.card + '%';

    // fill full report
    document.getElementById('pulseVal').textContent = pulse + ' bpm';
    document.getElementById('rhythmVal').textContent = rhythm;
    document.getElementById('stressVal').textContent = stress;
    document.getElementById('diabVal').textContent = risks.diab + '%';
    document.getElementById('cardVal').textContent = risks.card + '%';
    document.getElementById('aiObs').innerHTML = 'AI Observation / роРроП роХро╡ройроорпН: <span class="highlight">' + observation + '</span>';
    document.getElementById('advice').innerHTML = 'Suggestion / рокро░ро┐роирпНродрпБро░рпИ: <span class="highlight">' + suggestion + '</span>';

    // primary inside report
    const primaryBox = document.getElementById('primaryConditionBox');
    document.getElementById('primaryCondText').textContent = `${primaryCond.en} тАФ ${primaryCond.ta}`;
    primaryBox.style.display='block';

    // render possible tags (exclude primary if duplicate)
    const listEl = document.getElementById('conditionsList'); listEl.innerHTML = '';
    possible.forEach(c => { if(c.en === primaryCond.en) return; const el = document.createElement('div'); el.className='condTag'; el.textContent = `${c.en} тАФ ${c.ta}`; listEl.appendChild(el); });
    if(listEl.children.length===0){ const el=document.createElement('div'); el.className='condTag'; el.textContent='No additional simulated conditions'; listEl.appendChild(el); }

    // show report
    document.getElementById('reportFull').style.display='block';

    // spoken bilingual summary
    const condNamesEn = [primaryCond.en].concat(Array.from(listEl.children).map(n=>n.textContent.split(' тАФ ')[0])).join('; ');
    const condNamesTa = [primaryCond.ta].concat(Array.from(listEl.children).map(n=>n.textContent.split(' тАФ ')[1]||'')).join('; ');
    const speakEn = `Simulation result. Primary condition detected: ${primaryCond.en}. Pulse ${pulse} beats per minute. Stress: ${stress.split('/')[0]}. Diabetes risk approximately ${risks.diab} percent. Cardiac risk approximately ${risks.card} percent. Observation: ${observation}. Suggested action: ${suggestion}. Possible conditions (simulation): ${condNamesEn}. This is a simulation only, not a diagnosis. Consult a doctor and confirm with tests.`;
    const speakTa = `рооро╛родро┐ро░ро┐ роорпБроЯро┐ро╡рпБ. роорпБродройрпНроорпИ роирпЛропрпН: ${primaryCond.ta}. роЗродропродрпН родрпБроЯро┐рокрпНрокрпБ ${pulse} роорпБро▒рпИ. роЕро┤рпБродрпНродроорпН: ${stress.split('/')[0]}. роирпАро░ро┐ро┤ро┐ро╡рпБ роЕрокро╛ропроорпН роЪрпБрооро╛ро░рпН ${risks.diab} роЪродро╡рпАродроорпН. роЗродроп роЕрокро╛ропроорпН роЪрпБрооро╛ро░рпН ${risks.card} роЪродро╡рпАродроорпН. роХро╡ройроорпН: ${observation}. рокро░ро┐роирпНродрпБро░рпИ: ${suggestion}. роЪро╛родрпНродро┐ропрооро╛рой роирпЛропрпНроХро│рпН (рооро╛родро┐ро░ро┐): ${condNamesTa}. роЗродрпБ рооро╛родро┐ро░ро┐ роороЯрпНроЯрпБроорпЗ; рооро░рпБродрпНродрпБро╡родрпН родрпАро░рпНрооро╛ройроорпН роЕро▓рпНро▓.`;

    speakHybrid(speakEn, speakTa);

    // stop heartbeat after scan
    setTimeout(()=> { heartbeat.pause(); heartbeat.currentTime=0; }, 6400);

  }, 3200); // scan delay
}

/* auto transition intro -> scan */
setTimeout(()=>{ document.getElementById('intro').style.display='none'; document.getElementById('scanSection').style.display='block'; }, 3000);

</script>
</body>
</html>
